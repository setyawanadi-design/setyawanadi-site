---
interface Props {
    body: string;
    date: Date;
}

const { body, date } = Astro.props;

function formatDate(d: Date) {
    return new Date(d)
        .toLocaleDateString("en-US", { month: "short", day: "numeric" })
        .toUpperCase();
}

function truncateString(str: string, num: number) {
    if (str.length <= num) {
        return str;
    }
    return str.slice(0, num) + "...";
}
---

<div
    class="break-inside-avoid p-6 bg-stone-50 dark:bg-stone-900/50 border border-stone-200 dark:border-stone-800 flex gap-4"
>
    <div
        class="w-1 bg-stone-300 dark:bg-stone-700 h-auto shrink-0 self-stretch"
    >
    </div>
    <div class="flex flex-col gap-2">
        <span
            class="font-mono text-xs text-stone-400 dark:text-stone-500 uppercase tracking-wide"
            >LOG â€¢ {formatDate(date)}</span
        >
        <p
            class="text-stone-800 dark:text-stone-200 font-mono text-sm leading-relaxed"
        >
            {truncateString(body.replace(/\n/g, " "), 200)}
        </p>
    </div>
</div>

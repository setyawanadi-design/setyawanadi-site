---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const allLogs = await getCollection("logs");
// Sort by date newest first
const sortedLogs = allLogs.sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),
);

function formatDate(d: Date) {
    return new Date(d)
        .toLocaleDateString("en-US", {
            year: "numeric",
            month: "short",
            day: "numeric",
        })
        .toUpperCase();
}
---

<Layout title="F. â€” Logs">
    <main
        class="flex-1 px-4 md:px-40 py-12 flex justify-center overflow-x-hidden"
    >
        <div class="flex flex-col max-w-2xl w-full min-w-0 flex-1 gap-12">
            <div class="flex flex-col gap-4 pt-8 pb-12">
                <h1
                    class="text-stone-900 dark:text-white text-4xl md:text-5xl font-bold tracking-tight leading-tight"
                >
                    Logs
                </h1>
                <p
                    class="text-stone-500 dark:text-stone-400 font-serif italic text-lg md:text-xl leading-relaxed max-w-lg"
                >
                    Updates on life, thoughts i have in mind in mind<br />this
                    may come sporadically
                </p>
            </div>

            {
                sortedLogs.map(async (log, index) => {
                    const { Content } = await log.render();
                    return (
                        <article
                            class={`flex flex-col ${index === 0 ? "mt-8" : ""}`}
                        >
                            <div class="flex items-center gap-4">
                                <div class="size-3 bg-white dark:bg-black border-[3px] border-stone-200 dark:border-stone-800 rounded-full -ml-px" />
                                <span class="font-mono text-lg font-bold text-stone-900 dark:text-white uppercase tracking-wider">
                                    {formatDate(log.data.date)}
                                </span>
                            </div>
                            <div class="flex gap-4 md:gap-6 mt-4 w-full min-w-0">
                                <div class="flex flex-col items-center w-3 shrink-0 -ml-px">
                                    <div class="w-px h-full bg-stone-200 dark:bg-stone-800" />
                                </div>
                                <div class="prose prose-slate dark:prose-invert max-w-full overflow-hidden pt-4 pb-12 w-full min-w-0 break-words prose-p:font-serif prose-p:text-lg prose-p:leading-loose prose-p:text-stone-800 prose-p:dark:text-stone-200 prose-code:before:content-none prose-code:after:content-none prose-code:font-mono prose-code:text-sm prose-code:bg-stone-100 prose-code:dark:bg-stone-900 prose-code:px-1 prose-code:py-0.5 prose-code:rounded-sm prose-code:text-stone-600 prose-code:dark:text-stone-400 prose-pre:bg-stone-50 prose-pre:dark:bg-stone-900 prose-pre:border prose-pre:border-stone-200 prose-pre:dark:border-stone-800 prose-pre:rounded-none prose-pre:p-4 md:prose-pre:p-5 prose-pre:text-stone-700 prose-pre:dark:text-stone-300 prose-pre:overflow-x-auto [&_pre_code]:bg-transparent [&_pre_code]:p-0 [&_pre_code]:text-inherit [&_pre_code]:border-none prose-img:aspect-video prose-img:w-full prose-img:bg-stone-100 prose-img:dark:bg-stone-900 prose-img:border prose-img:border-stone-200 prose-img:dark:border-stone-800 prose-img:grayscale prose-img:object-cover prose-img:opacity-80 hover:prose-img:opacity-100 prose-img:transition-opacity prose-img:duration-500 prose-img:my-6 prose-table:w-full prose-table:overflow-x-auto prose-table:block md:prose-table:table prose-table:border prose-table:border-stone-200 prose-table:dark:border-stone-800 prose-table:text-left prose-table:text-sm prose-table:my-6 prose-table:table-auto prose-thead:border-b prose-thead:border-stone-200 prose-thead:dark:border-stone-800 prose-thead:bg-stone-50 prose-thead:dark:bg-stone-900 prose-th:p-2 md:prose-th:p-3 prose-th:font-mono prose-th:font-bold prose-th:text-stone-900 prose-th:dark:text-white prose-th:uppercase prose-th:tracking-wider prose-tbody:divide-y prose-tbody:divide-stone-200 prose-tbody:dark:divide-stone-800 prose-tbody:font-mono prose-tr:transition-colors hover:prose-tr:bg-stone-50 hover:prose-tr:dark:bg-stone-900/50 prose-td:p-2 md:prose-td:p-3 prose-td:text-stone-800 prose-td:dark:text-stone-200">
                                    <Content />
                                </div>
                            </div>
                        </article>
                    );
                })
            }

            <section
                class="mt-8 py-8 border-t border-stone-200 dark:border-stone-800"
            >
                <div
                    class="bg-stone-50 dark:bg-stone-900 border border-stone-200 dark:border-stone-800 p-8 flex flex-col gap-6 rounded"
                >
                    <div class="flex flex-col gap-2">
                        <h4
                            class="text-stone-900 dark:text-white font-bold text-lg"
                        >
                            Get in touch
                        </h4>
                        <p
                            class="text-stone-600 dark:text-stone-400 font-serif text-sm leading-relaxed max-w-md"
                        >
                            Have a question or just want to say hello? I'm
                            always open to discussing design, code, or the
                            philosophy of building things.
                        </p>
                    </div>
                    <div class="flex flex-wrap items-center gap-6">
                        <a
                            class="inline-flex items-center gap-2 text-sm font-bold bg-primary hover:bg-primary/90 text-white px-5 py-2.5 transition-colors shadow-sm rounded"
                            href="/contact"
                        >
                            <span class="material-symbols-outlined text-lg"
                                >mail</span
                            >
                            Email Me
                        </a>
                    </div>
                </div>
            </section>
        </div>
    </main>
</Layout>
